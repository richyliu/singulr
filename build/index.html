<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Singulr Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
            <li><p>Beta v0.0.1r10</p></li>
            <li><a href='https://github.com/richyliu/singulr'>View on Github</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to Singulr! Singulr is a javascript library that loads only the part of
a web page that changes, improving performance.</p>

<p>This documentation is divided into 2 parts: functions accessable by the Singulr
global variable, and how to install and use Singulr on your website.</p>

<h1 id="singulr">Singulr</h1>

<h2 id="init">init</h2>

<blockquote>
<p>See the table to the right for all possible options</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">Singulr</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
</code></pre>

<p>Run <code class="prettyprint">Singulr.init(options)</code> to load up Singulr. Note that Singulr.init() <strong>does not</strong> return anything, so only one
Singulr can only be used on one <a href="#index-page">index page</a>.</p>

<h3 id="options">Options</h3>

<table><thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>onDocumentPageLoaded</td>
<td>A function that fires when everything except the scripts have been loaded (on a <a href="#page">page</a>)</td>
</tr>
<tr>
<td>onPageLoaded</td>
<td>A function that fires when the everything have been loaded (on a <a href="#page">page</a>)</td>
</tr>
<tr>
<td>onDependenciesLoaded</td>
<td>A function that fires when the dependencies have been loaded, but the current <a href="#page">page</a> hasn&rsquo;t been loaded yet</td>
</tr>
<tr>
<td>analyticNodes</td>
<td>A list of DOM nodes that are added every time a <a href="#page">page</a> is loaded (for things like Google Analytics)</td>
</tr>
<tr>
<td>HOME_PAGE</td>
<td>A string representing the home <a href="#page">page</a>, which is loaded when the user visits the <a href="#index-page">index page</a> (default: <code class="prettyprint">home.html</code>)</td>
</tr>
<tr>
<td>BASE_PAGE</td>
<td>A string representing the <a href="#base-page">base page</a>, which includes things like the navbar and footer and is loaded on every page (default: <code class="prettyprint">base.html</code>)</td>
</tr>
<tr>
<td>PAGE_404</td>
<td>A string representing the 404 <a href="#page">page</a>, which is loaded when the page the user is looking for isn&rsquo;t found (default: <code class="prettyprint">404.html</code>)</td>
</tr>
<tr>
<td>PAGE_ID</td>
<td>A string representing the id of the div which the <a href="#base-page">base page</a> is loaded into (default: <code class="prettyprint">page</code>)</td>
</tr>
<tr>
<td>CONTENT_ID</td>
<td>A string representing the id of the div which the actual <a href="#page">page</a> is loaded into (default: <code class="prettyprint">content</code>)</td>
</tr>
<tr>
<td>dependencies</td>
<td><ul><li><code>javascript</code>: list of javascript file urls to be loaded. Note: the scripts are loaded in order.</li><li><code>css</code>: list of css file urls to be loaded. Note: the styles are loaded in parallel.</li></ul></td>
</tr>
</tbody></table>

<aside class="warning">
  The `CONTENT_ID` div is inside the <a href="#base-page">base page</a>, not the <a href="#index-page">index page</a>
</aside>

<h2 id="getpage">getPage</h2>

<blockquote>
<p>Log the current page to the console</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Singulr</span><span class="p">.</span><span class="nx">getPage</span><span class="p">());</span>
</code></pre>

<p>Returns the current page (returns the home page if currently on <a href="#index-page">index page</a>)</p>

<h2 id="loadpage">loadPage</h2>

<blockquote>
<p>Example (loads <code class="prettyprint">about.html</code>)</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">Singulr</span><span class="p">.</span><span class="nx">loadPage</span><span class="p">(</span><span class="s1">'about.html'</span><span class="p">)</span>
</code></pre>

<p>Use this instead of setting <code class="prettyprint">window.location.href</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>Takes a string page as an input, and loads the page, similar to clicking a link on a page</td>
</tr>
</tbody></table>

<h1 id="notes">Notes</h1>

<h2 id="link-event-handlers">Link event handlers</h2>

<p>Do not bind event handlers to <code class="prettyprint">&lt;a&gt;</code> tags with <code class="prettyprint">element.addEventListener(&#39;click&#39;)</code>.
Instead use <code class="prettyprint">element.onclick</code>.</p>

<h2 id="keyframes">Keyframes</h2>

<p>If you are using keyframes, do not have a keyframe name <code class="prettyprint">fLhpiHgvMd</code>.</p>

<h1 id="page-layout">Page Layout</h1>

<h2 id="necessary-parts">Necessary Parts</h2>

<p>Include <a href="#add-redirect-script">this</a> at the top of every page!</p>

<h2 id="css-links">CSS Links</h2>

<blockquote>
<p>Valid</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/foo.css"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/foo.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/foo.css"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">foo=</span><span class="s">"bar"</span><span class="nt">&gt;</span>
</code></pre>

<blockquote>
<p>Invalid</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"css/foo.css"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/foo.css"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
</code></pre>

<p>You can put link elements anywhere, both in the body and head. Make sure you
use the format <code class="prettyprint">&lt;link rel=&quot;stylesheet&quot; href=&quot;css/foo.css&quot; type=&quot;text/css&quot;&gt;</code>.</p>

<h2 id="css-styles">CSS Styles</h2>

<blockquote>
<p>Valid</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;style&gt;</span>
    <span class="nc">.foo</span> <span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
    <span class="p">}</span>
<span class="o">&lt;/</span><span class="nt">style</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nt">style</span><span class="o">&gt;</span>
    <span class="nt">abcdefg</span>
<span class="o">&lt;/</span><span class="nt">style</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nt">style</span><span class="o">&gt;</span><span class="nt">&lt;/style&gt;</span>
</code></pre>

<blockquote>
<p>Invalid</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;sty&gt;</span>
    abcdefg
<span class="nt">&lt;/sty&gt;</span>
</code></pre>

<p>You can also put css directly in <code class="prettyprint">&lt;style&gt;</code> tags.</p>

<h2 id="inline-javascript">Inline Javascript</h2>

<blockquote>
<p>Valid</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;script&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'foobarbaz'</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span><span class="nx">abcdefg</span><span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;&lt;/script&gt;</span>
</code></pre>

<blockquote>
<p>Invalid</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"foo.js"</span><span class="nt">&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">);</span>
    <span class="c1">// In this case, foo.js is loaded and console.log('bar')</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span><span class="nx">abcdefg</span><span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;&lt;/script&gt;</span>
</code></pre>

<p>You can inline javascript code anywhere. Code in the head will be ran before the
the body is loaded.</p>

<h2 id="external-javascript">External Javascript</h2>

<blockquote>
<p>Valid</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"foo.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"path/to/foo.js"</span><span class="nt">&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">);</span>
    <span class="c1">// In this case, path/to/foo.js is loaded and console.log('bar')</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"foo.js"</span> <span class="na">bar=</span><span class="s">"baz"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>

<blockquote>
<p>Invalid</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;script&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"foo.js"</span><span class="nt">&gt;</span><span class="err">
</span></code></pre>

<p>You can use external javascript code
(<code class="prettyprint">&lt;script src=&quot;path/to/javascriptfile.js&quot;&gt;&lt;/script&gt;</code>) anywhere. Code in the head
will be ran before the body is loaded.</p>

          <h1 id="installation-guide-simple">Installation Guide (simple)</h1>

<h2 id="add-singulr">Add Singulr</h2>

<h3 id="include-script">Include script</h3>

<blockquote>
<p>Add this code to the bottom of the body</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://rawgit.com/richyliu/singulr/release/singulr.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>

<p>Start off by adding singulr.min.js to your website, preferably at the bottom of
the body.</p>

<h3 id="init-singulr">Init Singulr</h3>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">Singulr</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
  <span class="na">onPageLoaded</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Singulr</span><span class="p">.</span><span class="nx">getPage</span><span class="p">())</span>
  <span class="p">},</span>
  <span class="nx">PAGE_ID</span><span class="err">:</span> <span class="s1">'the_page_id'</span><span class="p">,</span>
  <span class="nx">CONTENT_ID</span><span class="err">:</span> <span class="s1">'the_content_id'</span><span class="p">,</span>
  <span class="nx">dependencies</span><span class="err">:</span> <span class="p">{</span>
    <span class="nl">javascript</span><span class="p">:</span> <span class="p">[</span>
      <span class="s1">'https://code.jquery.com/jquery-2.2.0.min.js'</span><span class="p">,</span>
      <span class="s1">'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="nx">css</span><span class="err">:</span> <span class="p">[</span>
      <span class="s1">'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'</span><span class="p">,</span>
      <span class="s1">'css/main.css'</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>

<p>Init Singulr with <code class="prettyprint">Singulr.init()</code>. You can provide <a href="#options">options</a> as well.</p>

<h2 id="add-redirect-script">Add Redirect Script</h2>

<blockquote>
<p>Make sure you add this code first inside the head, so it executes first before anything else.</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">id=</span><span class="s">"singulr-ignore"</span><span class="nt">&gt;</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="o">=</span><span class="s1">'/index.html?'</span><span class="o">+</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/</span><span class="se">[^\/](\/[\w\%\-\_]</span><span class="sr">+</span><span class="se">(\.[</span><span class="sr">a-zA-Z</span><span class="se">]</span><span class="sr">+</span><span class="se">)?)</span><span class="sr">+</span><span class="se">(?:(?=\#</span><span class="sr">|</span><span class="se">\?)</span><span class="sr">|$</span><span class="se">)</span><span class="sr">/</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="nt">&lt;/script&gt;</span>
</code></pre>

<p>Add this code to the top of the head in every <a href="#page">page</a> except for the
<a href="#index-page">index page</a>.</p>

          <h1 id="installation-guide-advanced">Installation Guide (advanced)</h1>

<h2 id="add-singulr">Add Singulr</h2>

<blockquote>
<p>Add this code to the bottom of the body</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://rawgit.com/richyliu/singulr/release/singulr.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>

<p>Start off by adding singulr.min.js to your website, preferably at the bottom of
the body.</p>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">Singulr</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
  <span class="na">dependencies</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">javascript</span><span class="p">:</span> <span class="p">[</span>
      <span class="s1">'foo/bar.js'</span><span class="p">,</span>
      <span class="s1">'main.js'</span>
    <span class="p">],</span> <span class="na">css</span><span class="p">:</span> <span class="p">[</span>
      <span class="s1">'stylesheet.css'</span><span class="p">,</span>
      <span class="s1">'http://example.com/foo.css'</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>

<h2 id="add-dependencies">Add dependencies</h2>

<p>Then, add your dependencies that aren&rsquo;t necessary to the dependencies in
<a href="#options">options</a></p>

          <h1 id="terminology">Terminology</h1>

<h2 id="page">Page</h2>

<p>The term <code class="prettyprint">page</code> is used to describe a page that is loaded every time you click a
link or use Singulr.loadPage() to load a page</p>

<h2 id="index-page">Index Page</h2>

<p>The term <code class="prettyprint">index page</code> is used to describe the page that you load singulr.min.js
on.</p>

<h2 id="base-page">Base Page</h2>

<p>The term <code class="prettyprint">index page</code> is used to describe the html page that the page is loaded
into. Typically this page includes the navbar and footer.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
          </div>
      </div>
    </div>
  </body>
</html>
